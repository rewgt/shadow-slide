2.3 使用定时器
--------------

&nbsp;

#### 在两个自动串接的单步之间插入定时器

某个单步串接到前一单步自动触发时，两个单步之间没有额外延时插入，会让用户感到动作发生太快，来不及思考。这时，我们通过在两个单步之间插入定时器解决。

接上一节演示步骤，我们再从 slide 资源页拖入 `DelayTimer` 样板，在当前页创建一个定时器组件，然后修改它的 `data-delay` 属性，指定值 `5`，表示延时 5 秒。

接着配置 pre-post step，在弹出窗口选上 `"join to previous step"` 与 `"play"` 选项，如下图：

![config timer](md/res/join_timer.png)

因为定时器最后被定义，未插在两个已串接的段落组件之间，我们选中后一段落组件，用剪切与粘贴将它重置，这样，这 3 个组件能依序自动串接单步了，而且定时器处在中间。

存盘，刷新一下在另一页面已打开的文档，看看两个段落组件之间的单步，是否插入了 5 秒延时。

说明：
1. `data-delay` 缺省值为 `0`，表示由 上图 `"fastest, faster, normal, slower, slowest"` 五个配置项决定延时时长，这五项分别对应于：1秒、2秒、3秒、4秒、5秒。 
2. 定时器属于可 play 组件，它的 pre-post step 配置窗口会额外增加 play、pause 选项。   
可 play 组件常用来表现一种延续一定时长的动作，比如播放音乐、展示 Canvas 动画等，Shadow Slide 提供机制让用户自行扩展这类组件，参见 [“附录：可播放组件规格”](#6.1.)。

#### 为定时器定义动作

定时器可选定义一个动作，在它被触发（play 开启）后，延时指定时长，延时结束时自动触发这个动作。定义动作要用 `trigger` 属性，或用 javascript 脚本为定时器定义 `$onClick` 函数，缺省时，定时器没有定义期满自动触发的动作。

因本特性涉及编程，这里暂不展开介绍，参见 [“API 参考”](#6.3.)。

#### 翻页自动触发单步

Shadow Slide 的单步操作只在胶片首遍演示时有效，就是说，当胶片从前到后，已翻至末尾，这时如果回到首页再往后翻页，单步操作将不再有效。也即：单步效果专为演示而生。

试想一下，某页中首个设置单步的组件，如果同时配置 `"join to previous step"` 选项会有什么效果？因为自动连接上步动作，首次翻至本页，它的单步操作自然自动触发。如果每页胶片都这么配置单步，而且，假定该项单步能驱动胶片向后翻页（比如用了跳页器），那么，该文档刚打开阅读时会发什么？没错！它能一页页自动往下翻。

&nbsp;
