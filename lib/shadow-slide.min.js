// shadow-slide cdn ver 0.1.0
window.W||(window.W=new Array,W.$modules=[]),W.$modules.push(function(a,b,c){"use strict";function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function x(a){return{type:"mono",editable:"all",baseUrl:v,tools:[]}}function F(a,b,c,d,e){z.lastIndex=0;for(var f=z.exec(a),g="",h=0;f;){var i=f[0];g+=a.slice(h,f.index),i=i.replace(A,"").replace(B,"stroke='"+b+"'").replace(C,"fill='"+c+"'").replace(D,"stroke-width='"+d+"'").replace(E,"stroke-dasharray='"+e+"'"),g+=i,h=z.lastIndex,f=z.exec(a)}return h<a.length&&(g+=a.slice(h)),g}function G(a,b,c,d,e,f,g,h){function B(a,b,c,d){var e=c-a,f=d-b,g=Math.abs(e),h=Math.abs(f),i=Math.sqrt(g*g+h*h),j=Math.acos(h/i),k=180/(Math.PI/j);return e>0?[i,f>0?90-k:270+k]:[i,f>0?90+k:270-k]}var i=.35,j=.333;if(void 0===a){if(void 0===g)return[c,d,e,f];var k=B(c,d,e,f),l=k[0],m=B(e,f,g,h),n=m[0],o=Math.abs(m[1]-k[1]);o>180&&(o=360-o),o>=90?(i=.38,j=.333-.266*(o-90)/180):j=.2+.266*o/180;var p=l*i/n,q=e-p*(g-e),r=f-p*(h-f),s=q-(q-c)*j,t=r-(r-d)*j,u=c+(q-c)*j,v=d+(r-d)*j;return[u,v,s,t]}var w=B(a,b,c,d),x=w[0],k=B(c,d,e,f),l=k[0],o=Math.abs(k[1]-w[1]);o>180&&(o=360-o),o>=90?(i=.38,j=.333-.266*(o-90)/180):j=.2+.266*o/180;var s,t,y=l*i/x,z=c+y*(c-a),A=d+y*(d-b),u=z+(e-z)*j,v=A+(f-A)*j;if(void 0===g)s=e-(e-z)*j,t=f-(f-A)*j;else{var m=B(e,f,g,h),n=m[0],o=Math.abs(m[1]-k[1]);o>180&&(o=360-o),o>=90?(i=.38,j=.333-.266*(o-90)/180):j=.2+.266*o/180;var p=l*i/n,q=e-p*(g-e),r=f-p*(h-f);s=q-(q-c)*j,t=r-(r-d)*j}return[u,v,s,t]}function I(a,b){function f(a,b){var c=H[a];return c?void b(c):void o.ajax({type:"GET",url:a,dataType:"json",success:function(d,e,f){H[a]=d,b(d)},error:function(c,d){b(null)}})}var c=a.length,d=0,e=0;return 0==c?void b():void a.forEach(function(a,g){var h=a[1];f(h,function(f){a[1]=f,f?e+=1:(console.log("warning: read JSON failed ("+h+")"),d+=1),d+e>=c&&b(0==d)})})}function J(a){function m(c){if(c){for(var e=j.length-1;e>=0;e--){var k=j[e];h[k[0]]=k[1]}var l=b[0],m=!1;l>=8&&(m=!0,l-=8);var n=b[1],p="";Array.isArray(n)&&n.length>=1?p=n[0]:n=null;var q=a.state.width,r=a.state.height;if(isNaN(q)||q<0)q=200;else if(q<1){var s=a.state.parentWidth;q=isNaN(s)?200:q*s}if(isNaN(r)||r<0)r=60;else if(r<1){var t=a.state.parentHeight;r=isNaN(t)?60:r*t}if(1==i&&l>=0){var u=h[0],v=u.svg,x=u.width,y=u.height,z=u.scalable?q+'" height="'+r:x+'" height="'+y;return z='width="'+z+'" viewPort="0 0 '+x+" "+y+'" ',v="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg">'+v+"</svg>",v=F(v,f,g,d,p),v='url("data:image/svg+xml;base64,'+o.Base64.encode(v)+'")',void(a.duals.style={backgroundImage:v})}if((l==-1||l==-2)&&n&&1==i){var u=h[0],A=n.length;if(A<8)return;var B=a.widget,C="mrk_";if(B&&(B=B.parent,B&&(B=B.component))){var D=B.state.defId;D&&(C=D)}C+=a.$gui.keyid+"";var E=n[2],H=n[3],I="stroke-dasharray='"+p+"' ",J="",K="";if(E>=1){var L="mrk"+E+"_start";if(K=u[L],!K)return;var M=C+"_start";K=K.replace(L,M),J="marker-start='url(#"+M+")' "}var N="",O="";if(H>=1){var P="mrk"+H+"_end";if(O=u[P],!O)return;var Q=C+"_end";O=O.replace(P,Q),N="marker-end='url(#"+Q+")' "}var R=Math.floor(2.5*d+.5);if(R*=w,q<=R+R||r<=R+R)return;for(var x=0,y=0,e=5;e<A;e+=2){var S=n[e-1],T=n[e];S>x&&(x=S),T>y&&(y=T)}for(var U=0==x?0:(q-R-R)/x,V=0==y?0:(r-R-R)/y,W=[],X=void 0,Y=void 0,e=5;e<A;e+=2){var Z=n[e-1]*U+R,$=n[e]*V+R;X===Z&&Y===$||(W.push(Z,$),X=Z,Y=$)}var _="",aa="";if(l==-1)for(var ba=W.length,e=1;e<ba;e+=2)e>1&&(_+=" "),_+=W[e-1]+","+W[e];else{var ba=W.length;if(4==ba)aa="M"+W[0]+" "+W[1]+"L"+W[2]+" "+W[3];else{W.unshift(void 0,void 0),ba+=2,aa="M"+W[2]+" "+W[3];for(var e=3;e<ba;e+=2){var ca=W[e-3],da=W[e-2],ea=W[e-1],fa=W[e];if(!(e<=ba-3))break;var ga=W[e+1],ha=W[e+2],ia=void 0,ja=void 0;e<=ba-5&&(ia=W[e+3],ja=W[e+4]);var ka=G(ca,da,ea,fa,ga,ha,ia,ja);aa+="C"+ka[0]+" "+ka[1]+" "+ka[2]+" "+ka[3]+" "+ga+" "+ha}}}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+q+" "+r+'" ',v="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg">';return v+="<g stroke='"+f+"' fill='"+g+"' "+I+"stroke-width='"+d+"'>",(K||O)&&(v+="<defs>"+K+O+"</defs>"),v+=l==-1?"<polyline "+J+N+"fill='rgba(0,0,0,0)' points='"+_+"'/>":"<path "+J+N+"fill='rgba(0,0,0,0)' d='"+aa+"'/>",v+="</g></svg>",v=F(v,f,g,d,p),v='url("data:image/svg+xml;base64,'+o.Base64.encode(v)+'")',void(a.duals.style={backgroundImage:v})}if(2!=i){if(3==i){var u=h[0],la=h[1],sa=h[2],v=u.svg,ma=la.svg,ta=sa.svg,x=u.width,y=u.height,na=la.width,oa=la.height,ua=sa.width,va=sa.height;if(1==l){if(y!=oa||oa!=va)return;var S,ea,ga,pa=y*q/r;if(m){if(S=x,ea=pa-x-ua,ga=ua,ea<=0)return;ma='<g transform="translate('+(S-1)+",0) scale("+(ea+2)/na+',1)">'+ma+"</g>",ta='<g transform="translate('+(S+ea)+',0)">'+ta+"</g>",v=v+ma+ta}else{if(S=(pa-na)*x/(x+ua),ea=na,ga=pa-S-na,S<=0||ga<=0)return;v='<g transform="scale('+(S+1)/x+',1)">'+v+"</g>",ma='<g transform="translate('+S+',0)">'+ma+"</g>",ta='<g transform="translate('+(S+ea-1)+",0) scale("+(ga+1)/ua+',1)">'+ta+"</g>",v=v+ma+ta}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+pa+" "+y+'" ',qa=r/y;v="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+v+"</g></svg>",v=F(v,f,g,d,p),v='url("data:image/svg+xml;base64,'+o.Base64.encode(v)+'")',a.duals.style={backgroundImage:v}}else if(2==l){if(x!=na||na!=ua)return;var T,fa,ha,ra=x*r/q;if(m){if(T=y,fa=ra-y-va,ha=va,fa<=0)return;ma='<g transform="translate(0,'+(T-1)+") scale(1,"+(fa+2)/oa+')">'+ma+"</g>",ta='<g transform="translate(0,'+(T+fa)+')">'+ta+"</g>",v=v+ma+ta}else{if(T=(ra-oa)*y/(y+va),fa=oa,ha=ra-T-fa,T<=0||ha<=0)return;v='<g transform="scale(1,'+(T+1)/y+')">'+v+"</g>",ma='<g transform="translate(0,'+T+')">'+ma+"</g>",ta='<g transform="translate(0,'+(T+fa-1)+") scale(1,"+(ha+1)/va+')">'+ta+"</g>",v=v+ma+ta}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+x+" "+ra+'" ',qa=q/x;v="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+v+"</g></svg>",v=F(v,f,g,d,p),v='url("data:image/svg+xml;base64,'+o.Base64.encode(v)+'")',a.duals.style={backgroundImage:v}}}}else{var u=h[0],la=h[1],v=u.svg,ma=la.svg,x=u.width,y=u.height,na=la.width,oa=la.height;if(1==l){if(y!=oa)return;var S,ea,pa=y*q/r;if(m){if(S=x,ea=pa-x,ea<=0)return;ma='<g transform="translate('+(S-1)+",0) scale("+(ea+1)/na+',1)">'+ma+"</g>",v+=ma}else{if(S=pa-na,ea=na,S<=0)return;v='<g transform="scale('+(S+1)/x+',1)">'+v+"</g>",ma='<g transform="translate('+S+',0)">'+ma+"</g>",v+=ma}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+pa+" "+y+'" ',qa=r/y;v="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+v+"</g></svg>",v=F(v,f,g,d,p),v='url("data:image/svg+xml;base64,'+o.Base64.encode(v)+'")',a.duals.style={backgroundImage:v}}else if(2==l){if(x!=na)return;var T,fa,ra=x*r/q;if(m){if(T=y,fa=ra-y,fa<=0)return;ma='<g transform="translate(0,'+(T-1)+") scale(1,"+(fa+1)/oa+')">'+ma+"</g>",v+=ma}else{if(T=ra-oa,fa=oa,T<=0)return;v='<g transform="scale(1,'+(T+1)/y+')">'+v+"</g>",ma='<g transform="translate(0,'+T+')">'+ma+"</g>",v+=ma}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+x+" "+ra+'" ',qa=q/x;v="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+v+"</g></svg>",v=F(v,f,g,d,p),v='url("data:image/svg+xml;base64,'+o.Base64.encode(v)+'")',a.duals.style={backgroundImage:v}}}}}var b=a.state["svg.cfg"];if(Array.isArray(b)&&!(b.length<3)){for(var d=(a.state.marked||"",a.state.stroke||3),e=a.state.style||{},f=e.strokeColor||"#888",g=e.fillColor||"#eee",h=b.slice(2),i=h.length,j=[],k=0;k<i;k++){var l=h[k];"string"==typeof l&&j.push([k,l])}I(j,m)}}function ba(a){var b={},c=a.split("&");return c.forEach(function(a){if(a){var c=a.split("="),d=c[0].trim();d&&(b[d]=(c[1]||"").trim())}}),b}function ca(){var a=ba(window.location.search.slice(1)),b=[],c=/-(.)/g;return Object.keys(a).forEach(function(d){var e=a[d],f=d.replace(c,function(a,b){return b.toUpperCase()});if(d!=f&&(b.push(d),d=f),e)if(e=decodeURIComponent(e),e.length<=48){var g=parseFloat(e);"number"==typeof g&&g+""===e?a[d]=g:a[d]=e}else a[d]=e;else a[d]=1}),b.forEach(function(b){delete a[b]}),a}function da(a){if(a.parentNode){var b=a.querySelector('div.rewgt-center > [class*="prebuild-"]');if(b){var c=b.getAttribute("data-prepost")||"",d=c.split("-");d.length>=5&&parseInt(d[4])&&ea(o.pageCtrl,o.pageCtrl.pageIndex,!0)}}}function ea(a,b,c){function y(){var h,c=R-O,d=R+O+Q,e=d+O+O+Q,f=c-O-O-Q,g=f-O-O-Q,i=null,k="";if(U.forEach(function(h,l){var m=!1;h.duals.top=j,l<=b?l==b?(h.duals.left=c,i=h,k=a.keys[b]):l==b-1?h.duals.left=f:l==b-2?h.duals.left=g:m=!0:l==b+1?h.duals.left=d:l==b+2?h.duals.left=e:m=!0,m?(h.duals.left=c,"none"!=h.state.style.display&&(h.duals.style={display:"none"})):"block"!=h.state.style.display&&(h.duals.style={display:"block"})}),i&&k){a.pageIndex=b;var h=i.getHtmlNode();if(h){var m=document.createEvent("Event");m.initEvent("slideenter",!0,!0),m.pageKey=k,m.pageIndex=b,h.dispatchEvent(m),setTimeout(function(){var b=!1;if(b="function"==typeof m.isDefaultPrevented?m.isDefaultPrevented():!!m.defaultPrevented,!b){var c=(V[k]||0)+1;V[k]=c,l?setTimeout(function(){a.enterPage(m,i,1==c)},1e3):a.enterPage(m,i,1==c)}},0)}}}if(a.keys.length)if(X){var e,f=X.widget,g=!1;if(f&&(e=f.parent)&&"function"==typeof X.stepIsDone?X.stepIsDone()&&(g=!0,X=null):X=null,X)return void setTimeout(function(){ea(a,b,c)},600);if(g){var h=e.component,i=h&&h.getHtmlNode();i&&da(i)}}else{S=Math.floor(window.innerHeight/2);var j=S-P,k=a.pageIndex,l=!1;if(0==T){l=!0,k=-1,T=1,U=[],t.classList.add("no-trans"),setTimeout(function(){t.classList.remove("no-trans")},1200);var m=O+O,n=P+P,p=[],q={};a.keys.forEach(function(a){var b=u[a];if(b&&(b=b.component)){var c=b.props.name;c&&"string"==typeof c&&(q[c]=U.length),U.push(b),p.push(a)}}),a.keys=p,a.namedPage=q;var r=[];U.forEach(function(b,c){var d=a.initPage(b,p[c],c,m,n,j);Y.apply(r,d)}),setTimeout(function(){r.forEach(function(a){o.addClass(a[0],a[1])})},1e3)}else T+=1;var s="undefined"==typeof b?"undefined":d(b);if("string"==s){var v=parseInt(b);v+""==b?(b=v,s="number"):(b=a.namedPage[b],s="undefined"==typeof b?"undefined":d(b))}if("number"==s){var w=a.keys.length;if(w&&(b>=w&&(b=w-1),b<0&&(b=0),b!==k||c)){if(c&&k>=0){var h=U[k];if(h){var x=!h.whenSlideLeave();if(x)return void(W&&X&&setTimeout(function(){ea(a,b,c)},300))}}l?setTimeout(function(){y()},0):y()}}}}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("react"),l=(a("react-dom"),a("shadow-widget")),m=l.$templates,n=l.$creator,o=l.$utils,q=(l.$ex,l.$main),r="",s="";!function(){var a=o.vendorId||[],b=a[0]||"";"ie"==b?(r="MSTransitionEnd",a[1]?s="transform":(s="msTransform",console.log("!warning: IE version too low, please use IE11 or higher"))):"firefox"==b?(r="transitionend",s="transform"):"opera"==b?(r="oTransitionEnd",s="transform"):"chrome"==b||"safari"==b||"webkit"==b?(r="webkitTransitionEnd",s="WebkitTransform"):console.log("!fatal error: unknown web browser type")}(),m.rewgt||(m.rewgt={});var t=null,u=null,v="/app/rewgt/shadow-slide/web/output",w=4,y=function(a){function b(a,c){g(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a||"rewgt.DrawPaper",c));return d._statedProp.push("defId","offsetX","offsetY"),d._defaultProp.offsetX=0,d._defaultProp.offsetY=0,d._silentProp.push("drawPaper."),d}return i(b,a),e(b,[{key:"_getGroupOpt",value:function(b){var c=x(b),d=b._._tools;return c.editable=b.props["data-inline"]?"all":"none",d&&(c.tools=d),c}},{key:"_getSchema",value:function(c,d){d=d||1200;var e=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_getSchema",this).call(this,c,d+200);return e.offsetX=[d+1,"number",null,"[number]: N pixels"],e.offsetY=[d+2,"number",null,"[number]: N pixels"],e.defId=[d+3,"string",null,"[string]: SVG marker ID"],e}},{key:"getDefaultProps",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getDefaultProps",this).call(this);return c["drawPaper."]=!0,c.offsetX=0,c.offsetY=0,c}},{key:"getInitialState",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getInitialState",this).call(this),d=this.props.defId;return d=d&&"string"==typeof d?d.slice(0,32):"_"+Math.floor((new Date).valueOf()/1e3),c.defId=d,c.offsetX=parseInt(this.props.offsetX)||0,c.offsetY=parseInt(this.props.offsetY)||0,this.defineDual("offsetX"),this.defineDual("offsetY"),c}},{key:"render",value:function(){if(o.syncProps(this),this.hideThis)return null;var b=this.prepareState(),c={margin:this.state.offsetY+"px 0 0 "+this.state.offsetX+"px"},d=j.createElement("div",{className:"rewgt-paperview",style:c},b),e=Object.assign({},this.state.style,{backgroundPosition:this.state.offsetX+"px "+this.state.offsetY+"px"}),f=o.setupRenderProp(this,e);return j.createElement("div",f,d)}}]),b}(m.Panel_);m.rewgt.DrawPaper_=y,m.rewgt.DrawPaper=new y;var z=/<g\b[^>]* _cfg=[^>]*>/gm,A=/ _cfg=['"].*?["']/m,B=/\bstroke=['"].*?["']/m,C=/\bfill=['"].*?["']/m,D=/\bstroke-width=['"].*?["']/m,E=/\bstroke-dasharray=['"].*?["']/m,H={},K=function(a){function b(a,c){g(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a||"rewgt.SvgPanel",c));return d._htmlText=!0,d._defaultProp.stroke=3,d._defaultProp.width=100,d._defaultProp.height=40,d._defaultProp.strentch="1",d._defaultProp.rotate=0,d}return i(b,a),e(b,[{key:"_getGroupOpt",value:function(b){return x(b)}},{key:"_getSchema",value:function(c,d){d=d||1200;var e=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_getSchema",this).call(this,c,d+200);return e.stroke=[d+1,"number",null,"[number]: draw pan width, N pixels"],e.marked=[d+2,"string",null,"[string]: markdown string"],e.strentch=[d+3,"string",["","1"],"[string]: strentch image"],e.rotate=[d+4,"number",null,"[number]: 0 ~ 360"],e}},{key:"getDefaultProps",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getDefaultProps",this).call(this);return c.stroke=3,c.width=100,c.height=40,c.strentch="1",c.rotate=0,c}},{key:"willResizing",value:function(b,c,d){var e=this.state.stroke;return e&&(this.state.stroke=0,this.duals.stroke=e),!0}},{key:"getInitialState",value:function(){function g(a,b){e=!0,setTimeout(function(){e&&(e=!1,d.isHooked&&J(d))},0)}function h(a){var b,c=a&&a.parent;return!!(c&&(b=c.component)&&b.props["data-design"]&&b.props["drawPaper."])}var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getInitialState",this).call(this);c.style.backgroundRepeat="no-repeat",this.$gui.hasIdSetter&&!l.__design__&&h(this.widget)&&(this.undefineDual("id__"),this.$gui.hasIdSetter=!1);var d=this,e=!1;return this.defineDual("html.",function(a,b){if(l.__design__||h(this.widget)){var c=this.state["html."]=a||"";if(c){var e=this.componentOf("txt");e||setTimeout(function(){var a=o.loadElement(["MarkedDiv",{key:"txt","html.":c,width:.9999,klass:"default-large-small p1-p2-p3-p0 align_center-right-default"}]);d.setChild(a,function(){var a=d.componentOf("txt");a&&a.listen("id__",function(b,c){b<=2||(d.state["html."]=a.state["html."]||"")})})},0)}}}),this.defineDual("svg.cfg",function(a,b){Array.isArray(a)&&g()}),this.defineDual("strentch",function(a,b){var c=this.state.strentch="0"===a?"":a?"1":"";c&&(c="100% 100%"),this.state.style=Object.assign({},this.state.style,{backgroundSize:c})}),this.defineDual("stroke",function(a,b){this.state.stroke=parseInt(a)||3,g()}),this.defineDual("style",function(a,b){(a.strokeColor||a.fillColor)&&g()}),this.defineDual("rotate",function(a,b){var c=this.state.rotate=parseInt(a)||0,d=this.state.style=Object.assign({},this.state.style);d[s]=0==c?"":"rotate("+c+"deg)"}),this.listen("width",g),this.listen("height",g),c}}]),b}(m.Panel_);m.rewgt.SvgPanel_=K,m.rewgt.SvgPanel=new K;var L=function(a){function b(a,c){g(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a||"rewgt.PlayShell",c));return d._defaultProp["step.play"]=!0,d._htmlText=!1,d}return i(b,a),e(b,[{key:"_getSchema",value:function(c,d){d=d||1200;var e=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_getSchema",this).call(this,c,d+200);return e["data-auto"]=[d+1,"string",["","1"],'[string]: auto play when page enter, "" or "1"'],e}},{key:"getDefaultProps",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getDefaultProps",this).call(this);return c["step.play"]=!0,c["data-auto"]="",c}},{key:"stepPlay",value:function(b){if(!l.__design__){var c=this.componentOf("player");c&&"function"==typeof c.stepPlay&&c.stepPlay(b)}}},{key:"stepPause",value:function(b){if(!l.__design__){var c=this.componentOf("player");c&&"function"==typeof c.stepPause&&c.stepPause(b)}}},{key:"stepIsDone",value:function(){if(!l.__design__){var b=this.componentOf("player");if(b&&"function"==typeof b.stepIsDone)return b.stepIsDone()}return!0}},{key:"playOnEnter",value:function(){var b=this.state["data-auto"];return"true"==b||!!parseInt(b)}}]),b}(m.P_);m.rewgt.PlayShell_=L,m.rewgt.PlayShell=new L;var M=function(a){function b(a,c){g(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a||"rewgt.GotoPage",c));return d._defaultProp["step.play"]=!0,d}return i(b,a),e(b,[{key:"_getGroupOpt",value:function(b){return x(b)}},{key:"_getSchema",value:function(c,d){d=d||1200;var e=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_getSchema",this).call(this,c,d+200);return e["data-goto"]=[d+1,"string",null,"[string]: +N, -N, N, or named_page"],e}},{key:"getDefaultProps",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getDefaultProps",this).call(this);return c["step.play"]=!0,c["data-goto"]="+1",c["html."]="GotoPage",c}},{key:"stepPlay",value:function(b){if(!l.__design__){var c=this;setTimeout(function(){var a=!1,b=!1,d=c.state["data-goto"]||"";"+"==d[0]?(a=!0,d=d.slice(1)):"-"==d[0]&&(b=!0,d=d.slice(1));var e=parseInt(d);if(!isNaN(e)||a||b||(e=o.pageCtrl.namedPage[d]),!isNaN(e)){var f=o.pageCtrl.pageIndex;f=a?f+e:b?f-e:e,o.pageCtrl.gotoPage(f)}},300)}}},{key:"stepPause",value:function(b){}},{key:"stepIsDone",value:function(){return!0}},{key:"playOnEnter",value:function(){return!1}},{key:"$onClick",value:function(b){if(!l.__design__&&!o.hasClass(this,"hidden-default")){for(var c=this.getHtmlNode(),d=b.target,e="";d&&!(e=d.getAttribute("data-goto")||"")&&d!==c&&d!==document;)d=d.parentNode;e&&(c!==d&&(this.duals["data-goto"]=e),this.stepPlay(0))}}}]),b}(m.Div_);m.rewgt.GotoPage_=M,m.rewgt.GotoPage=new M;var N=function(a){function b(a,c){g(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a||"rewgt.DelayTimer",c));return d._defaultProp["step.play"]=!0,d}return i(b,a),e(b,[{key:"_getGroupOpt",value:function(b){return x(b)}},{key:"_getSchema",value:function(c,d){d=d||1200;var e=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_getSchema",this).call(this,c,d+200);return e["data-delay"]=[d+1,"string",null,"[string]: 0 or N seconds"],e["data-auto"]=[d+2,"string",["","1"],'[string]: auto delay when page enter, "" or "1"'],e}},{key:"getDefaultProps",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getDefaultProps",this).call(this);return c["step.play"]=!0,c["data-delay"]="0",c["data-auto"]="",c}},{key:"getInitialState",value:function(){var c=f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"getInitialState",this).call(this);return this.canAct=!0,this.isDone=!1,c}},{key:"stepPlay",value:function(b){if(!l.__design__){var c=parseInt(this.state["data-delay"])||0;if(0===c&&(c=b||0),!isNaN(c)){this.canAct=!0,this.isDone=!1;var d=this;setTimeout(function(){d.isDone=!0;var a,b,c=d.canAct;c&&d.$onClick&&(a=d.getHtmlNode())&&"hidden"!=window.getComputedStyle(a).visibility&&(b=document.createEvent("Event"),b.target=a,d.$onClick(b)),c&&Array.isArray(d.state.trigger)&&o.fireTrigger(d)},1e3*c)}}}},{key:"stepPause",value:function(b){this.canAct=!1}},{key:"stepIsDone",value:function(){return this.isDone}},{key:"playOnEnter",value:function(){var b=this.state["data-auto"];return"true"==b||!!parseInt(b)}}]),b}(m.P_);m.rewgt.DelayTimer_=N,m.rewgt.DelayTimer=new N;var O=450,P=350,Q=100,R=Math.floor(window.innerWidth/2),S=Math.floor(window.innerHeight/2),T=0,U=[],V={},W=null,X=null,Y=Array.prototype.push,Z=[0,0,0,0],$=["-prebuild-1","-prebuild-2","-prebuild-3","-prebuild-4","-prebuild-5"],_=[],aa=!0;q.$onLoad.push(function(){function x(){if(U.length&&b.autoplay&&"number"==typeof b.autoplay){if(a.pageIndex>=U.length-1){if(!b.loopback)return;aa=!1,t.classList.add("no-trans");for(var c=_.length-1;c>=0;c--){var d=_[c];if(d.widget&&d.isHooked&&d.widget.parent){X&&(y(X,!0),X=null);var e=(d.state.margin||Z).slice(0);e[0]=d.oldMarginT||0,e[3]=d.oldMarginL||0;var f={opacity:"",zIndex:(d.oldZindex||0)+""};f[s]="",d.duals.margin=e,d.duals.style=f}else _.splice(c,1)}setTimeout(function(){t.classList.remove("no-trans"),T=0,V={},W=null,X=null,a.gotoPage(0)},300)}else a.gotoPage(a.pageIndex+1);setTimeout(x,1e3*b.autoplay)}}function y(a,b){var c=a.widget;c&&c.parent&&"function"==typeof a.stepPause&&a.stepPause(b?"JUMP_PAGE":"NEXT_PAGE")}function z(a){var b=a.state["data-prepost"],c="";if(!b)return c;var d=b.split("-");if(d.length>=2){var e=parseInt(d[0]),f=parseInt(d[1]);if(isNaN(e)||!(f>=1&&f<=5))return c;if(a.oldZindex=parseInt((a.state.style||{}).zIndex)||0,0==e||18==e||19==e){if(0==e&&d.length>=4){var g=parseInt(d[2]);13==g?a.duals.style={opacity:"0"}:11!=g&&12!=g||(a.duals.style={opacity:"0.98"})}var h=a.state.margin||Z;c="prebuild-"+f,a.oldMarginL=h[3],a.oldMarginT=h[0]}else if(e>=1&&e<=17){var i=a.state.left||0,j=a.state.top||0,k=a.state.width||200,l=a.state.height||0;if(!l){var m=a.getHtmlNode();m&&(l=m.clientHeight||100)}var h=(a.state.margin||Z).slice(0),n=h[3],o=h[0];if(e<=4)1==e?h[0]=-P-j-l:2==e?h[3]=O-i:3==e?h[0]=P-j:h[3]=-O-i-k,a.duals.margin=h,a.duals.style={opacity:"0"};else if(e<=8){var p={opacity:"0"};5==e?(h[0]=-P-j-l,h[3]=O-i,p[s]="rotate(-215deg) scale(0.2,0.2)"):6==e?(h[0]=P-j,h[3]=O-i,p[s]="rotate(215deg) scale(0.2,0.2)"):7==e?(h[0]=P-j,h[3]=-O-i-k,p[s]="rotate(-215deg) scale(0.2,0.2)"):(h[0]=-P-j-l,h[3]=-O-i-k,p[s]="rotate(215deg) scale(0.2,0.2)"),a.duals.margin=h,a.duals.style=p}else if(9==e){var p={opacity:"0"};p[s]="scale(0.1,0.1)",a.duals.style=p}else if(10==e){var p={opacity:"0"};p[s]="rotate(1800deg) scale(0.1,0.1)",a.duals.style=p}else if(e<=13)13==e?a.duals.style={opacity:"0"}:a.duals.style={opacity:"0.98"};else if(14==e){var p={};p[s]="scale(0.6,0.6)",a.duals.style=p}else if(15==e){var p={};p[s]="scale(0.8,0.8)",a.duals.style=p}else if(16==e){var p={};p[s]="scale(1.2,1.2)",a.duals.style=p}else{var p={};p[s]="scale(1.4,1.4)",a.duals.style=p}c="prebuild-"+f,a.oldMarginL=n,a.oldMarginT=o}}return c}function A(){var b,c,a=!1,d=this.getHtmlNode();if(d&&(b=this.widget)){if(W){if(W.parentNode){if(c=W.querySelector(".build > .to-build"))return E(b,c),!1;F(b,W)&&(a=!0)}W=null}var e=d.querySelectorAll('div.rewgt-center > [class*="prebuild-"]'),c=e[0];if(c){var f=null,g=c.getAttribute("data-prepost")||"";if(g.startsWith("0-")){var h=[c];c=null;for(var j,i=1;j=e[i];i++){var k=j.getAttribute("data-prepost")||"";if(!k.startsWith("0-")){c=j,g=k,f=e[i+1];break}h.push(j)}h.forEach(function(c){F(b,c)&&(a=!0)})}else f=e[1];var l=c&&o.keyOfNode(c);if(l){var m=b[l];if(m=m&&m.component,m&&(W=m.getHtmlNode())){var n=g.split("-"),p=n[0],q={opacity:""},t=(m.state.margin||Z).slice(0);t[0]=m.oldMarginT||0,t[3]=m.oldMarginL||0,q[s]="";var u=!1;if("11"==p)q.zIndex=C(b)+"";else if("12"==p)q.zIndex=D(b)+"";else if("18"==p){if(u=!0,"function"==typeof m.stepPlay){var v=parseInt(n[1]||"3");m.stepPlay(v);var k=f&&f.getAttribute("data-prepost");k&&parseInt(k.split("-")[4])&&(X=m)}}else"19"==p&&(u=!0,"function"==typeof m.stepPause&&m.stepPause("PRE_STEP"));return u?o.removeClass(m,["prebuild-1","prebuild-2","prebuild-3","prebuild-4","prebuild-5"]):W.addEventListener(r,B(!0,b),!1),m.duals.margin=t,m.duals.style=q,!1}}}if(c=d.querySelector(".build > .to-build"))return E(b,c),!1}return!a&&X&&(y(X,!1),X=null),!a}function B(a,b){var c=function(e){var f=e.target;f.removeEventListener(r,c),c=null;var g=b.parent&&b.component;if(g=g&&g.getHtmlNode()){var h=o.keyOfNode(f),i=h&&b[h];i=i&&i.component,i&&(a?(o.removeClass(i,["prebuild-1","prebuild-2","prebuild-3","prebuild-4","prebuild-5"]),setTimeout(function(){da(g)},300)):o.removeClass(i,["postbuild-1","postbuild-2","postbuild-3","postbuild-4","postbuild-5"]))}};return c}function C(a){var b=-999,c=0;return o.eachElement(a.component,function(d){var e,f=o.keyOfElement(d);if(f&&(e=a[f])&&(e=e.component)){c+=1;var g=parseInt(e.state.style.zIndex||"0");g>b&&(b=g)}}),0==c?0:b>=999?999:b+1}function D(a){var b=999,c=0;return o.eachElement(a.component,function(d){var e,f=o.keyOfElement(d);if(f&&(e=a[f])&&(e=e.component)){c+=1;var g=parseInt(e.state.style.zIndex||"0");g<b&&(b=g)}}),0==c?0:b<=-999?-999:b-1}function E(a,b){var c=b.parentNode,d=c.parentNode.classList.contains("rewgt-static");if(!d){var e=o.keyOfNode(c),f=o.keyOfNode(b),g=e&&a[e];if(g=g&&f&&g[f],g=g&&g.component)return void o.removeClass(g,"to-build")}b.classList.remove("to-build")}function F(a,b){function i(){var c=d.state.left||0,e=d.state.top||0,f=d.state.width||200,h=d.state.height||0;h||(h=b.clientHeight||100);var i=(d.state.margin||Z).slice(0);if(g<=4)1==g?i[0]=-P-e-h:2==g?i[3]=O-c:3==g?i[0]=P-e:i[3]=-O-c-f,d.duals.margin=i,d.duals.style={opacity:"0"};else if(g<=8){var j={opacity:"0"};5==g?(i[0]=-P-e-h,i[3]=O-c,j[s]="rotate(-215deg) scale(0.2,0.2)"):6==g?(i[0]=P-e,i[3]=O-c,j[s]="rotate(215deg) scale(0.2,0.2)"):7==g?(i[0]=P-e,i[3]=-O-c-f,j[s]="rotate(-215deg) scale(0.2,0.2)"):(i[0]=-P-e-h,i[3]=-O-c-f,j[s]="rotate(215deg) scale(0.2,0.2)"),d.duals.margin=i,d.duals.style=j}else if(9==g){var j={opacity:"0"};j[s]="scale(0.1,0.1)",d.duals.style=j}else if(10==g){var j={opacity:"0"};j[s]="rotate(1800deg) scale(0.1,0.1)",d.duals.style=j}else if(g<=13){var j={opacity:"0.99"};11==g?j.zIndex=C(a)+"":12==g?j.zIndex=D(a)+"":j.zIndex=(d.oldZindex||0)+"",d.duals.style=j}else if(g<=17){var j={};14==g?j[s]="scale(0.6,0.6)":15==g?j[s]="scale(0.8,0.8)":16==g?j[s]="scale(1.2,1.2)":j[s]="scale(1.4,1.4)",d.duals.style=j}}var c=o.keyOfNode(b);if(!c)return!1;var d=a[c];if(d=d&&d.component,!d)return!1;var e=d.state["data-prepost"]||"",f=e.split("-");if(f.length>=4){var g=parseInt(f[2]),h=parseInt(f[3]);if(g>=1&&g<=17){if(h>=1&&h<=5)return o.setClass(d,$.concat(["postbuild-"+h])),setTimeout(function(){b.addEventListener(r,B(!1,a),!1),i()},300),!0}else{if(18==g)return o.setClass(d,$),"function"==typeof d.stepPlay&&d.stepPlay(h),!0;if(19==g)return o.setClass(d,$),"function"==typeof d.stepPause&&d.stepPause("POST_STEP"),!0}}return o.setClass(d,$),!1}if(t=n.containNode_,u=n.topmostWidget_,t&&u){var a=o.pageCtrl;if(!a){if(l.__design__)return;a=o.pageCtrl=new n.pageCtrl_([])}var b,c=!1,d=a.leftPanel,e=a.rightPanel;if(d&&e&&a.gotoPage_){var f=!1;b=ca(),a.config?b=Object.assign({},a.config,b):f=!0,a.config=b,a.keys.length||(f&&(void 0===b.noSidebar&&(b.noSidebar=!0),void 0===b.noKeypress&&(b.noKeypress=!0)),b.autoplay=!1),d.onclick=function(b){c=!1,a.prevPage()},e.onclick=function(b){c=!0,a.nextPage()},d.classList.add("wdgt-pgctrl"),d.classList.add("left"),e.classList.add("wdgt-pgctrl"),e.classList.add("right"),d.style.opacity="0.1",e.style.opacity="0.1";var i,g=window.innerWidth,h=window.innerHeight,j=!0,k=900,m=700,p=!1;b.size&&2==(i=(b.size+"").split("x")).length&&(k=parseFloat(i[0]),k=k<=0?0:k<=.9999?.9999==k?g:Math.floor(g*k):Math.max(200,k),m=parseFloat(i[1]),m<=0?(m=0,0==k&&(p=!0)):m=m<=.9999?.9999==m?h:Math.floor(h*m):Math.max(160,m),j=!1),p?(O=Math.floor(g/2),P=Math.floor(h/2),Q=0):j?(O=g-20<k?Math.floor((g-20)/2):Math.floor(k/2),P=h-16<m?Math.floor((h-16)/2):Math.floor(m/2),Q=Math.min(100,g-O-O&4294967294)):(0==k&&(k=g-20),O=Math.floor(k/2),0==m&&(m=h-16),P=Math.floor(m/2),Q=Math.min(100,g-O-O&4294967294));var q;if(b.pageGap&&!isNaN(q=parseInt(b.pageGap))&&q>0&&(Q=q),b.backgroundColor){var v=u.component;v&&(v.duals.style={backgroundColor:b.backgroundColor})}b.noSidebar?a.setDisplay({leftCtrlWidth:0,rightCtrlWidth:0}):setTimeout(function(){d.style.opacity="0",e.style.opacity="0",setTimeout(function(){d.style.opacity="0.1",e.style.opacity="0.1",setTimeout(function(){d.style.opacity="0",e.style.opacity="0"},500)},300)},1e3),b.noFrame&&t.classList.add("no-frame"),b.noTrans&&t.classList.add("no-trans"),b.noGround&&t.classList.add("no-ground"),b.noKeypress||document.addEventListener("keydown",function(b){var d=b.keyCode,e=!1;c=!1,b.ctrlKey||b.shiftKey||b.altKey||b.metaKey?!b.ctrlKey||b.shiftKey||b.altKey||b.metaKey?!b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||(38==d?(a.gotoPage(0),e=!0):40==d&&(a.gotoPage(o.pageCtrl.keys.length-1),e=!0)):36==d?(a.gotoPage(0),e=!0):35==d&&(a.gotoPage(o.pageCtrl.keys.length-1),e=!0):39==d||40==d||34==d||13==d||32==d?(c=!0,a.nextPage(),e=!0):37!=d&&38!=d&&33!=d||(a.prevPage(),e=!0),e&&b.preventDefault()},!1),b.autoplay&&b.loopback||(aa=!1),a.renewPages=function(b){var c=[],d={},e=[],f=[],g=a.keys,h=a.pageIndex;if(b.forEach(function(a){var b=a[0],g=a[1];parseInt(b)+""!==b&&(d[b]=c.length),g.whenSlideLeave||f.push([b,g,c.length]),c.push(b),e.push(g)}),g.forEach(function(a){c.indexOf(a)<0&&delete V[a]}),f.length&&T>0){t.classList.add("no-trans"),setTimeout(function(){t.classList.remove("no-trans")},100),S=Math.floor(window.innerHeight/2);var i=S-P,j=O+O,k=P+P,l=[];f.forEach(function(b){var c=b[0],d=b[1],e=b[2],f=a.initPage(d,c,e,j,k,i);Y.apply(l,f)}),l.forEach(function(a){o.addClass(a[0],a[1])})}var m,n=g[h],p="string"==typeof n;if(a.keys=c,a.namedPage=d,U=e,p&&(m=c.indexOf(n))>=0)a.pageIndex=m;else{var q=0;if(p)for(var r=h-1;r>=0;r--){var s=g[r];if(s&&(m=c.indexOf(s))>=0){q=r;break}}c.length?setTimeout(function(){a.gotoPage(q)},300):a.pageIndex=0}},a.gotoPage_=function(b,d){var e=b[d],f=U[d];return e&&f?(ea(a,d,c),c=!1,[e,f.widget]):["",null]},a.isFirstEnter=function(a){if(!a||!a.classList.contains("rewgt-scene"))return!1;var b=o.keyOfNode(a);return!!b&&(V[b]||0)<1},a.initPage=function(a,b,c,d,e,f){var g=[];a.whenSlideLeave||(a.whenSlideLeave=A);var h,i=a.getHtmlNode();if(i&&(h=a.widget)){for(var l,j=i.querySelectorAll("div.rewgt-center > [data-prepost]"),k=0;l=j[k];k++){var b=o.keyOfNode(l);if(b){var m=h[b];if(m=m&&m.component){var n=z(m);n&&(aa&&_.push(m),g.push([m,n]))}}}j=i.querySelectorAll(".rewgt-static > .build, .rewgt-center > .build");for(var l,k=0;l=j[k];k++){var b,p=l.parentNode.classList.contains("rewgt-static"),q=null;!p&&(b=o.keyOfNode(l))&&(q=b&&h[b]);for(var s,r=0;s=l.children[r];r++)if(p)s.classList.add("to-build");else if(q&&(b=o.keyOfNode(s))){var m=q[b];m=m&&m.component,m&&o.addClass(m,"to-build")}}}return a.duals.width=d,a.duals.height=e,a.duals.top=f,a.duals.borderWidth=[1,1,1,1],g},a.enterPage=function(a,b,c){if(!l.__design__){X&&(y(X,!0),X=null),W=null;var d;if(c&&(d=b.getHtmlNode())){var e=!1,f=d.querySelector('div.rewgt-center > [class*="prebuild-"]');if(f){var g=f.getAttribute("data-prepost")||"",h=g.split("-");
h.length>=5&&parseInt(h[4])&&(e=!0)}for(var f,i=[],j=d.querySelectorAll("div.rewgt-center > *"),k=0;f=j[k];k++)if(f.classList.contains("rewgt-panel")||f.classList.contains("rewgt-unit")){var m=o.keyOfNode(f);m&&i.push(m)}var n;if(i.length&&(n=b.widget)&&setTimeout(function(){i.forEach(function(a){var b=n[a],c=b&&b.component;c&&c.props["step.play"]&&"function"==typeof c.playOnEnter&&c.playOnEnter()&&"function"==typeof c.stepPlay&&c.stepPlay(0)})},300),e){var p=a.target;setTimeout(function(){da(p)},300)}}}};var w=b.page||0;"string"==typeof w&&(w=a.namedPage[w]||0),"number"!=typeof w&&(w=0),a.pageIndex=w,ea(a,w,c),b.autoplay&&("number"!=typeof b.autoplay?b.autoplay=0:setTimeout(x,1e3*b.autoplay))}}})});