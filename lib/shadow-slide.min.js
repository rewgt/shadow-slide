// shadow-slide cdn ver 0.0.2
!function(){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function u(a){return{type:"mono",editable:"all",baseUrl:s,tools:[]}}function C(a,b,c,d,e){w.lastIndex=0;for(var f=w.exec(a),g="",h=0;f;){var i=f[0];g+=a.slice(h,f.index),i=i.replace(x,"").replace(y,"stroke='"+b+"'").replace(z,"fill='"+c+"'").replace(A,"stroke-width='"+d+"'").replace(B,"stroke-dasharray='"+e+"'"),g+=i,h=w.lastIndex,f=w.exec(a)}return h<a.length&&(g+=a.slice(h)),g}function D(a,b,c,d,e,f,g,h){function B(a,b,c,d){var e=c-a,f=d-b,g=Math.abs(e),h=Math.abs(f),i=Math.sqrt(g*g+h*h),j=Math.acos(h/i),k=180/(Math.PI/j);return e>0?[i,f>0?90-k:270+k]:[i,f>0?90+k:270-k]}var i=.35,j=.333;if(void 0===a){if(void 0===g)return[c,d,e,f];var k=B(c,d,e,f),l=k[0],m=B(e,f,g,h),n=m[0],o=Math.abs(m[1]-k[1]);o>180&&(o=360-o),o>=90?(i=.38,j=.333-.266*(o-90)/180):j=.2+.266*o/180;var p=l*i/n,q=e-p*(g-e),r=f-p*(h-f),s=q-(q-c)*j,t=r-(r-d)*j,u=c+(q-c)*j,v=d+(r-d)*j;return[u,v,s,t]}var w=B(a,b,c,d),x=w[0],k=B(c,d,e,f),l=k[0],o=Math.abs(k[1]-w[1]);o>180&&(o=360-o),o>=90?(i=.38,j=.333-.266*(o-90)/180):j=.2+.266*o/180;var s,t,y=l*i/x,z=c+y*(c-a),A=d+y*(d-b),u=z+(e-z)*j,v=A+(f-A)*j;if(void 0===g)s=e-(e-z)*j,t=f-(f-A)*j;else{var m=B(e,f,g,h),n=m[0],o=Math.abs(m[1]-k[1]);o>180&&(o=360-o),o>=90?(i=.38,j=.333-.266*(o-90)/180):j=.2+.266*o/180;var p=l*i/n,q=e-p*(g-e),r=f-p*(h-f);s=q-(q-c)*j,t=r-(r-d)*j}return[u,v,s,t]}function F(a,b){function f(a,b){var c=E[a];return c?void b(c):void l.ajax({type:"GET",url:a,dataType:"json",success:function(d,e,f){E[a]=d,b(d)},error:function(c,d){b(null)}})}var c=a.length,d=0,e=0;return 0==c?void b():void a.forEach(function(a,g){var h=a[1];f(h,function(f){a[1]=f,f?e+=1:(console.log("warning: read JSON failed ("+h+")"),d+=1),d+e>=c&&b(0==d)})})}function G(a){function n(c){if(c){for(var e=j.length-1;e>=0;e--){var k=j[e];h[k[0]]=k[1]}var m=b[0],n=!1;m>=8&&(n=!0,m-=8);var o=b[1],p="";Array.isArray(o)&&o.length>=1?p=o[0]:o=null;var q=a.state.width,r=a.state.height;if(isNaN(q)||q<0)q=200;else if(q<1){var s=a.state.parentWidth;q=isNaN(s)?200:q*s}if(isNaN(r)||r<0)r=60;else if(r<1){var u=a.state.parentHeight;r=isNaN(u)?60:r*u}if(1==i&&m>=0){var v=h[0],w=v.svg,x=v.width,y=v.height,z=v.scalable?q+'" height="'+r:x+'" height="'+y;return z='width="'+z+'" viewPort="0 0 '+x+" "+y+'" ',w="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg">'+w+"</svg>",w=C(w,f,g,d,p),w='url("data:image/svg+xml;base64,'+l.Base64.encode(w)+'")',void(a.duals.style={backgroundImage:w})}if((m==-1||m==-2)&&o&&1==i){var v=h[0],A=o.length;if(A<8)return;var B=a.widget,E="mrk_";if(B&&(B=B.parent,B&&(B=B.component))){var F=B.state.defId;F&&(E=F)}E+=a.$gui.keyid+"";var G=o[2],H=o[3],I="stroke-dasharray='"+p+"' ",J="",K="";if(G>=1){var L="mrk"+G+"_start";if(K=v[L],!K)return;var M=E+"_start";K=K.replace(L,M),J="marker-start='url(#"+M+")' "}var N="",O="";if(H>=1){var P="mrk"+H+"_end";if(O=v[P],!O)return;var Q=E+"_end";O=O.replace(P,Q),N="marker-end='url(#"+Q+")' "}var R=Math.floor(2.5*d+.5);if(R*=t,q<=R+R||r<=R+R)return;for(var x=0,y=0,e=5;e<A;e+=2){var S=o[e-1],T=o[e];S>x&&(x=S),T>y&&(y=T)}for(var U=0==x?0:(q-R-R)/x,V=0==y?0:(r-R-R)/y,W=[],X=void 0,Y=void 0,e=5;e<A;e+=2){var Z=o[e-1]*U+R,$=o[e]*V+R;X===Z&&Y===$||(W.push(Z,$),X=Z,Y=$)}var _="",aa="";if(m==-1)for(var ba=W.length,e=1;e<ba;e+=2)e>1&&(_+=" "),_+=W[e-1]+","+W[e];else{var ba=W.length;if(4==ba)aa="M"+W[0]+" "+W[1]+"L"+W[2]+" "+W[3];else{W.unshift(void 0,void 0),ba+=2,aa="M"+W[2]+" "+W[3];for(var e=3;e<ba;e+=2){var ca=W[e-3],da=W[e-2],ea=W[e-1],fa=W[e];if(!(e<=ba-3))break;var ga=W[e+1],ha=W[e+2],ia=void 0,ja=void 0;e<=ba-5&&(ia=W[e+3],ja=W[e+4]);var ka=D(ca,da,ea,fa,ga,ha,ia,ja);aa+="C"+ka[0]+" "+ka[1]+" "+ka[2]+" "+ka[3]+" "+ga+" "+ha}}}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+q+" "+r+'" ',w="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg">';return w+="<g stroke='"+f+"' fill='"+g+"' "+I+"stroke-width='"+d+"'>",(K||O)&&(w+="<defs>"+K+O+"</defs>"),w+=m==-1?"<polyline "+J+N+"fill='rgba(0,0,0,0)' points='"+_+"'/>":"<path "+J+N+"fill='rgba(0,0,0,0)' d='"+aa+"'/>",w+="</g></svg>",w=C(w,f,g,d,p),w='url("data:image/svg+xml;base64,'+l.Base64.encode(w)+'")',void(a.duals.style={backgroundImage:w})}if(2!=i){if(3==i){var v=h[0],la=h[1],sa=h[2],w=v.svg,ma=la.svg,ta=sa.svg,x=v.width,y=v.height,na=la.width,oa=la.height,ua=sa.width,va=sa.height;if(1==m){if(y!=oa||oa!=va)return;var S,ea,ga,pa=y*q/r;if(n){if(S=x,ea=pa-x-ua,ga=ua,ea<=0)return;ma='<g transform="translate('+(S-1)+",0) scale("+(ea+2)/na+',1)">'+ma+"</g>",ta='<g transform="translate('+(S+ea)+',0)">'+ta+"</g>",w=w+ma+ta}else{if(S=(pa-na)*x/(x+ua),ea=na,ga=pa-S-na,S<=0||ga<=0)return;w='<g transform="scale('+(S+1)/x+',1)">'+w+"</g>",ma='<g transform="translate('+S+',0)">'+ma+"</g>",ta='<g transform="translate('+(S+ea-1)+",0) scale("+(ga+1)/ua+',1)">'+ta+"</g>",w=w+ma+ta}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+pa+" "+y+'" ',qa=r/y;w="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+w+"</g></svg>",w=C(w,f,g,d,p),w='url("data:image/svg+xml;base64,'+l.Base64.encode(w)+'")',a.duals.style={backgroundImage:w}}else if(2==m){if(x!=na||na!=ua)return;var T,fa,ha,ra=x*r/q;if(n){if(T=y,fa=ra-y-va,ha=va,fa<=0)return;ma='<g transform="translate(0,'+(T-1)+") scale(1,"+(fa+2)/oa+')">'+ma+"</g>",ta='<g transform="translate(0,'+(T+fa)+')">'+ta+"</g>",w=w+ma+ta}else{if(T=(ra-oa)*y/(y+va),fa=oa,ha=ra-T-fa,T<=0||ha<=0)return;w='<g transform="scale(1,'+(T+1)/y+')">'+w+"</g>",ma='<g transform="translate(0,'+T+')">'+ma+"</g>",ta='<g transform="translate(0,'+(T+fa-1)+") scale(1,"+(ha+1)/va+')">'+ta+"</g>",w=w+ma+ta}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+x+" "+ra+'" ',qa=q/x;w="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+w+"</g></svg>",w=C(w,f,g,d,p),w='url("data:image/svg+xml;base64,'+l.Base64.encode(w)+'")',a.duals.style={backgroundImage:w}}}}else{var v=h[0],la=h[1],w=v.svg,ma=la.svg,x=v.width,y=v.height,na=la.width,oa=la.height;if(1==m){if(y!=oa)return;var S,ea,pa=y*q/r;if(n){if(S=x,ea=pa-x,ea<=0)return;ma='<g transform="translate('+(S-1)+",0) scale("+(ea+1)/na+',1)">'+ma+"</g>",w+=ma}else{if(S=pa-na,ea=na,S<=0)return;w='<g transform="scale('+(S+1)/x+',1)">'+w+"</g>",ma='<g transform="translate('+S+',0)">'+ma+"</g>",w+=ma}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+pa+" "+y+'" ',qa=r/y;w="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+w+"</g></svg>",w=C(w,f,g,d,p),w='url("data:image/svg+xml;base64,'+l.Base64.encode(w)+'")',a.duals.style={backgroundImage:w}}else if(2==m){if(x!=na)return;var T,fa,ra=x*r/q;if(n){if(T=y,fa=ra-y,fa<=0)return;ma='<g transform="translate(0,'+(T-1)+") scale(1,"+(fa+1)/oa+')">'+ma+"</g>",w+=ma}else{if(T=ra-oa,fa=oa,T<=0)return;w='<g transform="scale(1,'+(T+1)/y+')">'+w+"</g>",ma='<g transform="translate(0,'+T+')">'+ma+"</g>",w+=ma}var z='width="'+q+'" height="'+r+'" viewPort="0 0 '+x+" "+ra+'" ',qa=q/x;w="<svg "+z+'version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+qa+","+qa+')">'+w+"</g></svg>",w=C(w,f,g,d,p),w='url("data:image/svg+xml;base64,'+l.Base64.encode(w)+'")',a.duals.style={backgroundImage:w}}}}}var b=a.state["svg.cfg"];if(Array.isArray(b)&&!(b.length<3)){for(var d=(a.state.marked||"",a.state.stroke||3),e=a.state.style||{},f=e.strokeColor||"#888",g=e.fillColor||"#eee",h=b.slice(2),i=h.length,j=[],k=0;k<i;k++){var m=h[k];"string"==typeof m&&j.push([k,m])}F(j,n)}}function Z(a){var b={},c=a.split("&");return c.forEach(function(a){if(a){var c=a.split("="),d=c[0].trim();d&&(b[d]=(c[1]||"").trim())}}),b}function $(){var a=Z(window.location.search.slice(1)),b=[],c=/-(.)/g;return Object.keys(a).forEach(function(d){var e=a[d],f=d.replace(c,function(a,b){return b.toUpperCase()});if(d!=f&&(b.push(d),d=f),e)if(e=decodeURIComponent(e),e.length<=48){var g=parseFloat(e);"number"==typeof g&&g+""===e?a[d]=g:a[d]=e}else a[d]=e;else a[d]=1}),b.forEach(function(b){delete a[b]}),a}function _(a){if(a.parentNode){var b=a.querySelector('div.rewgt-center > [class*="prebuild-"]');if(b){var c=b.getAttribute("data-prepost")||"",d=c.split("-");d.length>=5&&parseInt(d[4])&&aa(l.pageCtrl,l.pageCtrl.pageIndex,!0)}}}function aa(b,c,d){function y(){var h,a=N-K,d=N+K+M,e=d+K+K+M,f=a-K-K-M,g=f-K-K-M,i=null,k="";if(Q.forEach(function(h,l){var m=!1;h.duals.top=j,l<=c?l==c?(h.duals.left=a,i=h,k=b.keys[c]):l==c-1?h.duals.left=f:l==c-2?h.duals.left=g:m=!0:l==c+1?h.duals.left=d:l==c+2?h.duals.left=e:m=!0,m?(h.duals.left=a,"none"!=h.state.style.display&&(h.duals.style={display:"none"})):"block"!=h.state.style.display&&(h.duals.style={display:"block"})}),i&&k){b.pageIndex=c;var h=i.getHtmlNode();if(h){var l=document.createEvent("Event");l.initEvent("slideenter",!0,!0),l.pageKey=k,l.pageIndex=c,h.dispatchEvent(l),setTimeout(function(){var a=!1;if(a="function"==typeof l.isDefaultPrevented?l.isDefaultPrevented():!!l.defaultPrevented,!a){var c=(R[k]||0)+1;R[k]=c,m?setTimeout(function(){b.enterPage(l,i,1==c)},1e3):b.enterPage(l,i,1==c)}},0)}}}if(b.keys.length)if(T){var e,f=T.widget,g=!1;if(f&&(e=f.parent)&&"function"==typeof T.stepIsDone?T.stepIsDone()&&(g=!0,T=null):T=null,T)return void setTimeout(function(){aa(b,c,d)},600);if(g){var h=e.component,i=h&&h.getHtmlNode();i&&_(i)}}else{O=Math.floor(window.innerHeight/2);var j=O-L,k=b.pageIndex,m=!1;if(0==P){m=!0,k=-1,P=1,Q=[],q.classList.add("no-trans"),setTimeout(function(){q.classList.remove("no-trans")},1200);var n=K+K,o=L+L,p=[],s={};b.keys.forEach(function(a){var b=r[a];if(b&&(b=b.component)){var c=b.props.name;c&&"string"==typeof c&&(s[c]=Q.length),Q.push(b),p.push(a)}}),b.keys=p,b.namedPage=s;var t=[];Q.forEach(function(a,c){var d=b.initPage(a,p[c],c,n,o,j);U.apply(t,d)}),setTimeout(function(){t.forEach(function(a){l.addClass(a[0],a[1])})},1e3)}else P+=1;var u="undefined"==typeof c?"undefined":a(c);if("string"==u){var v=parseInt(c);v+""==c?(c=v,u="number"):(c=b.namedPage[c],u="undefined"==typeof c?"undefined":a(c))}if("number"==u){var w=b.keys.length;if(w&&(c>=w&&(c=w-1),c<0&&(c=0),c!==k||d)){if(d&&k>=0){var h=Q[k];if(h){var x=!h.whenSlideLeave();if(x)return void(S&&T&&setTimeout(function(){aa(b,c,d)},300))}}m?setTimeout(function(){y()},0):y()}}}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},g=window.React,h=window.ReactDOM,i=window.W;g&&h&&i||console.log("fatal error: invalid cdn version of react or shadow-widget.");var j=i.$templates,k=i.$creator,l=i.$utils,n=(i.$ex,i.$main),o="",p="";!function(){var a=l.vendorId||[],b=a[0]||"";"ie"==b?(o="MSTransitionEnd",a[1]?p="transform":(p="msTransform",console.log("!warning: IE version too low, please use IE11 or higher"))):"firefox"==b?(o="transitionend",p="transform"):"opera"==b?(o="oTransitionEnd",p="transform"):"chrome"==b||"safari"==b||"webkit"==b?(o="webkitTransitionEnd",p="WebkitTransform"):console.log("!fatal error: unknown web browser type")}(),j.rewgt||(j.rewgt={});var q=null,r=null,s="/app/rewgt/shadow-slide/web/output",t=4,v=function(a){function h(a,b){d(this,h);var c=e(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a||"rewgt.DrawPaper",b));return c._statedProp.push("defId"),c._defaultProp.offsetX=0,c._defaultProp.offsetY=0,c._silentProp.push("drawPaper."),c}return f(h,a),b(h,[{key:"_getGroupOpt",value:function(b){return u(b)}},{key:"_getSchema",value:function(b,d){d=d||1200;var e=c(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"_getSchema",this).call(this,b,d+200);return e.offsetX=[d+1,"number",null,"[number]: N pixels"],e.offsetY=[d+2,"number",null,"[number]: N pixels"],e.defId=[d+3,"string",null,"[string]: SVG marker ID"],e}},{key:"getDefaultProps",value:function(){var b=c(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"getDefaultProps",this).call(this);return b["drawPaper."]=!0,b.offsetX=0,b.offsetY=0,b}},{key:"getInitialState",value:function(){var b=c(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"getInitialState",this).call(this),d=this.props.defId;return d=d&&"string"==typeof d?d.slice(0,32):"_"+Math.floor((new Date).valueOf()/1e3),b.defId=d,b.offsetX=parseInt(this.props.offsetX)||0,b.offsetY=parseInt(this.props.offsetY)||0,this.defineDual("offsetX"),this.defineDual("offsetY"),b}},{key:"render",value:function(){if(l.syncProps(this),this.hideThis)return null;var b=this.prepareState(),c={margin:this.state.offsetY+"px 0 0 "+this.state.offsetX+"px"},d=g.createElement("div",{className:"rewgt-paperview",style:c},b),e=Object.assign({},this.state.style,{backgroundPosition:this.state.offsetX+"px "+this.state.offsetY+"px"}),f=l.setupRenderProp(this,e);return g.createElement("div",f,d)}}]),h}(j.Panel_);j.rewgt.DrawPaper_=v,j.rewgt.DrawPaper=new v;var w=/<g\b[^>]* _cfg=[^>]*>/gm,x=/ _cfg=['"].*?["']/m,y=/\bstroke=['"].*?["']/m,z=/\bfill=['"].*?["']/m,A=/\bstroke-width=['"].*?["']/m,B=/\bstroke-dasharray=['"].*?["']/m,E={},H=function(a){function g(a,b){d(this,g);var c=e(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,a||"rewgt.SvgPanel",b));return c._htmlText=!0,c._defaultProp.stroke=3,c._defaultProp.width=100,c._defaultProp.height=40,c._defaultProp.strentch="1",c._defaultProp.rotate=0,c}return f(g,a),b(g,[{key:"_getGroupOpt",value:function(b){return u(b)}},{key:"_getSchema",value:function(b,d){d=d||1200;var e=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"_getSchema",this).call(this,b,d+200);return e.stroke=[d+1,"number",null,"[number]: draw pan width, N pixels"],e.marked=[d+2,"string",null,"[string]: markdown string"],e.strentch=[d+3,"string",["","1"],"[string]: strentch image"],e.rotate=[d+4,"number",null,"[number]: 0 ~ 360"],e}},{key:"getDefaultProps",value:function(){var b=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"getDefaultProps",this).call(this);return b.stroke=3,b.width=100,b.height=40,b.strentch="1",b.rotate=0,b}},{key:"willResizing",value:function(b,c,d){var e=this.state.stroke;return e&&(this.state.stroke=0,this.duals.stroke=e),!0}},{key:"getInitialState",value:function(){function f(a,b){e=!0,setTimeout(function(){e&&(e=!1,d.isHooked&&G(d))},0)}var b=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"getInitialState",this).call(this),d=this,e=!1;return this.defineDual("html.",function(a,b){if(i.__design__){var c=this.state["html."]=a||"";if(c){var e=this.componentOf("txt");e||setTimeout(function(){var a=l.loadElement(["MarkedDiv",{key:"txt","html.":c,width:.9999,klass:"default-large-small p1-p2-p3-p0 align_center-right-default"}]);d.setChild(a,function(){var a=d.componentOf("txt");a&&a.listen("id__",function(b,c){b<=2||(d.state["html."]=a.state["html."]||"")})})},0)}}}),this.defineDual("svg.cfg",function(a,b){Array.isArray(a)&&f()}),this.defineDual("strentch",function(a,b){var c=this.state.strentch="0"===a?"":a?"1":"";c&&(c="100% 100%"),this.state.style=Object.assign({},this.state.style,{backgroundSize:c})}),this.defineDual("stroke",function(a,b){this.state.stroke=parseInt(a)||3,f()}),this.defineDual("style",function(a,b){(a.strokeColor||a.fillColor)&&f()}),this.defineDual("rotate",function(a,b){var c=this.state.rotate=parseInt(a)||0,d=this.state.style=Object.assign({},this.state.style);d[p]=0==c?"":"rotate("+c+"deg)"}),this.listen("width",f),this.listen("height",f),b}}]),g}(j.Panel_);j.rewgt.SvgPanel_=H,j.rewgt.SvgPanel=new H;var I=function(a){function g(a,b){d(this,g);var c=e(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,a||"rewgt.GotoPage",b));return c._defaultProp["step.play"]=!0,c}return f(g,a),b(g,[{key:"_getGroupOpt",value:function(b){return u(b)}},{key:"_getSchema",value:function(b,d){d=d||1200;var e=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"_getSchema",this).call(this,b,d+200);return e["data-goto"]=[d+1,"string",null,"[string]: +N, -N, N, or named_page"],e}},{key:"getDefaultProps",value:function(){var b=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"getDefaultProps",this).call(this);return b["step.play"]=!0,b["data-goto"]="+1",b["html."]="GotoPage",b}},{key:"stepPlay",value:function(b){if(!i.__design__){var c=this;setTimeout(function(){var a=!1,b=!1,d=c.state["data-goto"]||"";"+"==d[0]?(a=!0,d=d.slice(1)):"-"==d[0]&&(b=!0,d=d.slice(1));var e=parseInt(d);if(!isNaN(e)||a||b||(e=l.pageCtrl.namedPage[d]),!isNaN(e)){var f=l.pageCtrl.pageIndex;f=a?f+e:b?f-e:e,l.pageCtrl.gotoPage(f)}},300)}}},{key:"stepPause",value:function(b){}},{key:"stepIsDone",value:function(){return!0}},{key:"playOnEnter",value:function(){return!1}},{key:"$onClick",value:function(b){if(!i.__design__&&!l.hasClass(this,"hidden-default")){for(var c=this.getHtmlNode(),d=b.target,e="";d&&!(e=d.getAttribute("data-goto")||"")&&d!==c&&d!==document;)d=d.parentNode;e&&(c!==d&&(this.duals["data-goto"]=e),this.stepPlay(0))}}}]),g}(j.Div_);j.rewgt.GotoPage_=I,j.rewgt.GotoPage=new I;var J=function(a){function g(a,b){d(this,g);var c=e(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,a||"rewgt.DelayTimer",b));return c._defaultProp["step.play"]=!0,c}return f(g,a),b(g,[{key:"_getGroupOpt",value:function(b){return u(b)}},{key:"_getSchema",value:function(b,d){d=d||1200;var e=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"_getSchema",this).call(this,b,d+200);return e["data-delay"]=[d+1,"string",null,"[string]: 0 or N seconds"],e["data-auto"]=[d+2,"string",null,'[string]: auto delay when page enter, "" or "1"'],e}},{key:"getDefaultProps",value:function(){var b=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"getDefaultProps",this).call(this);return b["step.play"]=!0,b["data-delay"]="0",b["data-auto"]="",b}},{key:"getInitialState",value:function(){var b=c(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"getInitialState",this).call(this);return this.canAct=!0,this.isDone=!1,b}},{key:"stepPlay",value:function(b){if(!i.__design__){var c=parseInt(this.state["data-delay"])||0;if(0===c&&(c=b||0),!isNaN(c)){this.canAct=!0,this.isDone=!1;var d=this;setTimeout(function(){d.isDone=!0;var a,b,c=d.canAct;c&&d.$onClick&&(a=d.getHtmlNode())&&"hidden"!=window.getComputedStyle(a).visibility&&(b=document.createEvent("Event"),b.target=a,d.$onClick(b)),c&&Array.isArray(d.state.trigger)&&l.fireTrigger(d)},1e3*c)}}}},{key:"stepPause",value:function(b){this.canAct=!1}},{key:"stepIsDone",value:function(){return this.isDone}},{key:"playOnEnter",value:function(){var b=this.state["data-auto"];return"true"==b||!!parseInt(b)}}]),g}(j.P_);j.rewgt.DelayTimer_=J,j.rewgt.DelayTimer=new J;var K=450,L=350,M=100,N=Math.floor(window.innerWidth/2),O=Math.floor(window.innerHeight/2),P=0,Q=[],R={},S=null,T=null,U=Array.prototype.push,V=[0,0,0,0],W=["-prebuild-1","-prebuild-2","-prebuild-3","-prebuild-4","-prebuild-5"],X=[],Y=!0;n.$onLoad.push(function(){function x(){if(Q.length&&b.autoplay&&"number"==typeof b.autoplay){if(a.pageIndex>=Q.length-1){if(!b.loopback)return;Y=!1,q.classList.add("no-trans");for(var c=X.length-1;c>=0;c--){var d=X[c];if(d.widget&&d.isHooked&&d.widget.parent){T&&(y(T,!0),T=null);var e=(d.state.margin||V).slice(0);e[0]=d.oldMarginT||0,e[3]=d.oldMarginL||0;var f={opacity:"",zIndex:(d.oldZindex||0)+""};f[p]="",d.duals.margin=e,d.duals.style=f}else X.splice(c,1)}setTimeout(function(){q.classList.remove("no-trans"),P=0,R={},S=null,T=null,a.gotoPage(0)},300)}else a.gotoPage(a.pageIndex+1);setTimeout(x,1e3*b.autoplay)}}function y(a,b){var c=a.widget;c&&c.parent&&"function"==typeof a.stepPause&&a.stepPause(b?"JUMP_PAGE":"NEXT_PAGE")}function z(a){var b=a.state["data-prepost"],c="";if(!b)return c;var d=b.split("-");if(d.length>=2){var e=parseInt(d[0]),f=parseInt(d[1]);if(isNaN(e)||!(f>=1&&f<=5))return c;if(a.oldZindex=parseInt((a.state.style||{}).zIndex)||0,0==e||18==e||19==e){if(0==e&&d.length>=4){var g=parseInt(d[2]);13==g?a.duals.style={opacity:"0"}:11!=g&&12!=g||(a.duals.style={opacity:"0.98"})}var h=a.state.margin||V;c="prebuild-"+f,a.oldMarginL=h[3],a.oldMarginT=h[0]}else if(e>=1&&e<=17){var i=a.state.left||0,j=a.state.top||0,k=a.state.width||200,l=a.state.height||0;if(!l){var m=a.getHtmlNode();m&&(l=m.clientHeight||100)}var h=(a.state.margin||V).slice(0),n=h[3],o=h[0];if(e<=4)1==e?h[0]=-L-j-l:2==e?h[3]=K-i:3==e?h[0]=L-j:h[3]=-K-i-k,a.duals.margin=h,a.duals.style={opacity:"0"};else if(e<=8){var q={opacity:"0"};5==e?(h[0]=-L-j-l,h[3]=K-i,q[p]="rotate(-215deg) scale(0.2,0.2)"):6==e?(h[0]=L-j,h[3]=K-i,q[p]="rotate(215deg) scale(0.2,0.2)"):7==e?(h[0]=L-j,h[3]=-K-i-k,q[p]="rotate(-215deg) scale(0.2,0.2)"):(h[0]=-L-j-l,h[3]=-K-i-k,q[p]="rotate(215deg) scale(0.2,0.2)"),a.duals.margin=h,a.duals.style=q}else if(9==e){var q={opacity:"0"};q[p]="scale(0.1,0.1)",a.duals.style=q}else if(10==e){var q={opacity:"0"};q[p]="rotate(1800deg) scale(0.1,0.1)",a.duals.style=q}else if(e<=13)13==e?a.duals.style={opacity:"0"}:a.duals.style={opacity:"0.98"};else if(14==e){var q={};q[p]="scale(0.6,0.6)",a.duals.style=q}else if(15==e){var q={};q[p]="scale(0.8,0.8)",a.duals.style=q}else if(16==e){var q={};q[p]="scale(1.2,1.2)",a.duals.style=q}else{var q={};q[p]="scale(1.4,1.4)",a.duals.style=q}c="prebuild-"+f,a.oldMarginL=n,a.oldMarginT=o}}return c}function A(){var b,c,a=!1,d=this.getHtmlNode();if(d&&(b=this.widget)){if(S){if(S.parentNode){if(c=S.querySelector(".build > .to-build"))return E(b,c),!1;F(b,S)&&(a=!0)}S=null}var e=d.querySelectorAll('div.rewgt-center > [class*="prebuild-"]'),c=e[0];if(c){var f=null,g=c.getAttribute("data-prepost")||"";if(g.startsWith("0-")){var h=[c];c=null;for(var j,i=1;j=e[i];i++){var k=j.getAttribute("data-prepost")||"";if(!k.startsWith("0-")){c=j,g=k,f=e[i+1];break}h.push(j)}h.forEach(function(c){F(b,c)&&(a=!0)})}else f=e[1];var m=c&&l.keyOfNode(c);if(m){var n=b[m];if(n=n&&n.component,n&&(S=n.getHtmlNode())){var q=g.split("-"),r=q[0],s={opacity:""},t=(n.state.margin||V).slice(0);t[0]=n.oldMarginT||0,t[3]=n.oldMarginL||0,s[p]="";var u=!1;if("11"==r)s.zIndex=C(b)+"";else if("12"==r)s.zIndex=D(b)+"";else if("18"==r){if(u=!0,"function"==typeof n.stepPlay){var v=parseInt(q[1]||"3");n.stepPlay(v);var k=f&&f.getAttribute("data-prepost");k&&parseInt(k.split("-")[4])&&(T=n)}}else"19"==r&&(u=!0,"function"==typeof n.stepPause&&n.stepPause("PRE_STEP"));return u?l.removeClass(n,["prebuild-1","prebuild-2","prebuild-3","prebuild-4","prebuild-5"]):S.addEventListener(o,B(!0,b),!1),n.duals.margin=t,n.duals.style=s,!1}}}if(c=d.querySelector(".build > .to-build"))return E(b,c),!1}return!a&&T&&(y(T,!1),T=null),!a}function B(a,b){var c=function(e){var f=e.target;f.removeEventListener(o,c),c=null;var g=b.parent&&b.component;if(g=g&&g.getHtmlNode()){var h=l.keyOfNode(f),i=h&&b[h];i=i&&i.component,i&&(a?(l.removeClass(i,["prebuild-1","prebuild-2","prebuild-3","prebuild-4","prebuild-5"]),setTimeout(function(){_(g)},300)):l.removeClass(i,["postbuild-1","postbuild-2","postbuild-3","postbuild-4","postbuild-5"]))}};return c}function C(a){var b=-999,c=0;return l.eachElement(a.component,function(d){var e,f=l.keyOfElement(d);if(f&&(e=a[f])&&(e=e.component)){c+=1;var g=parseInt(e.state.style.zIndex||"0");g>b&&(b=g)}}),0==c?0:b>=999?999:b+1}function D(a){var b=999,c=0;return l.eachElement(a.component,function(d){var e,f=l.keyOfElement(d);if(f&&(e=a[f])&&(e=e.component)){c+=1;var g=parseInt(e.state.style.zIndex||"0");g<b&&(b=g)}}),0==c?0:b<=-999?-999:b-1}function E(a,b){var c=b.parentNode,d=c.parentNode.classList.contains("rewgt-static");if(!d){var e=l.keyOfNode(c),f=l.keyOfNode(b),g=e&&a[e];if(g=g&&f&&g[f],g=g&&g.component)return void l.removeClass(g,"to-build")}b.classList.remove("to-build")}function F(a,b){function i(){var c=d.state.left||0,e=d.state.top||0,f=d.state.width||200,h=d.state.height||0;h||(h=b.clientHeight||100);var i=(d.state.margin||V).slice(0);if(g<=4)1==g?i[0]=-L-e-h:2==g?i[3]=K-c:3==g?i[0]=L-e:i[3]=-K-c-f,d.duals.margin=i,d.duals.style={opacity:"0"};else if(g<=8){var j={opacity:"0"};5==g?(i[0]=-L-e-h,i[3]=K-c,j[p]="rotate(-215deg) scale(0.2,0.2)"):6==g?(i[0]=L-e,i[3]=K-c,j[p]="rotate(215deg) scale(0.2,0.2)"):7==g?(i[0]=L-e,i[3]=-K-c-f,j[p]="rotate(-215deg) scale(0.2,0.2)"):(i[0]=-L-e-h,i[3]=-K-c-f,j[p]="rotate(215deg) scale(0.2,0.2)"),d.duals.margin=i,d.duals.style=j}else if(9==g){var j={opacity:"0"};j[p]="scale(0.1,0.1)",d.duals.style=j}else if(10==g){var j={opacity:"0"};j[p]="rotate(1800deg) scale(0.1,0.1)",d.duals.style=j}else if(g<=13){var j={opacity:"0.99"};11==g?j.zIndex=C(a)+"":12==g?j.zIndex=D(a)+"":j.zIndex=(d.oldZindex||0)+"",d.duals.style=j}else if(g<=17){var j={};14==g?j[p]="scale(0.6,0.6)":15==g?j[p]="scale(0.8,0.8)":16==g?j[p]="scale(1.2,1.2)":j[p]="scale(1.4,1.4)",d.duals.style=j}}var c=l.keyOfNode(b);if(!c)return!1;var d=a[c];if(d=d&&d.component,!d)return!1;var e=d.state["data-prepost"]||"",f=e.split("-");if(f.length>=4){var g=parseInt(f[2]),h=parseInt(f[3]);if(g>=1&&g<=17){if(h>=1&&h<=5)return l.setClass(d,W.concat(["postbuild-"+h])),setTimeout(function(){b.addEventListener(o,B(!1,a),!1),i()},300),!0}else{if(18==g)return l.setClass(d,W),"function"==typeof d.stepPlay&&d.stepPlay(h),!0;if(19==g)return l.setClass(d,W),"function"==typeof d.stepPause&&d.stepPause("POST_STEP"),!0}}return l.setClass(d,W),!1}if(q=k.containNode_,r=k.topmostWidget_,q&&r){var a=l.pageCtrl;if(!a){if(i.__design__)return;a=l.pageCtrl=new k.pageCtrl_([])}var b,c=!1,d=a.leftPanel,e=a.rightPanel;if(d&&e&&a.gotoPage_){var f=!1;b=$(),a.config?b=Object.assign({},a.config,b):f=!0,a.config=b,a.keys.length||(f&&(void 0===b.noSidebar&&(b.noSidebar=!0),void 0===b.noKeypress&&(b.noKeypress=!0)),b.autoplay=!1),d.onclick=function(b){c=!1,a.prevPage()},e.onclick=function(b){c=!0,a.nextPage()},d.classList.add("wdgt-pgctrl"),d.classList.add("left"),e.classList.add("wdgt-pgctrl"),e.classList.add("right"),d.style.opacity="0.1",e.style.opacity="0.1";var j,g=window.innerWidth,h=window.innerHeight,m=!0,n=900,s=700,t=!1;b.size&&2==(j=(b.size+"").split("x")).length&&(n=parseFloat(j[0]),n=n<=0?0:n<=.9999?.9999==n?g:Math.floor(g*n):Math.max(200,n),s=parseFloat(j[1]),s<=0?(s=0,0==n&&(t=!0)):s=s<=.9999?.9999==s?h:Math.floor(h*s):Math.max(160,s),m=!1),t?(K=Math.floor(g/2),L=Math.floor(h/2),M=0):m?(K=g-20<n?Math.floor((g-20)/2):Math.floor(n/2),L=h-16<s?Math.floor((h-16)/2):Math.floor(s/2),M=Math.min(100,g-K-K&4294967294)):(0==n&&(n=g-20),K=Math.floor(n/2),0==s&&(s=h-16),L=Math.floor(s/2),M=Math.min(100,g-K-K&4294967294));var u;if(b.pageGap&&!isNaN(u=parseInt(b.pageGap))&&u>0&&(M=u),b.backgroundColor){var v=r.component;v&&(v.duals.style={backgroundColor:b.backgroundColor})}b.noSidebar?a.setDisplay({leftCtrlWidth:0,rightCtrlWidth:0}):setTimeout(function(){d.style.opacity="0",e.style.opacity="0",setTimeout(function(){d.style.opacity="0.1",e.style.opacity="0.1",setTimeout(function(){d.style.opacity="0",e.style.opacity="0"},500)},300)},1e3),b.noFrame&&q.classList.add("no-frame"),b.noTrans&&q.classList.add("no-trans"),b.noGround&&q.classList.add("no-ground"),b.noKeypress||document.addEventListener("keydown",function(b){var d=b.keyCode,e=!1;c=!1,b.ctrlKey||b.shiftKey||b.altKey||b.metaKey?!b.ctrlKey||b.shiftKey||b.altKey||b.metaKey?!b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||(38==d?(a.gotoPage(0),e=!0):40==d&&(a.gotoPage(l.pageCtrl.keys.length-1),e=!0)):36==d?(a.gotoPage(0),e=!0):35==d&&(a.gotoPage(l.pageCtrl.keys.length-1),e=!0):39==d||40==d||34==d||13==d||32==d?(c=!0,a.nextPage(),e=!0):37!=d&&38!=d&&33!=d||(a.prevPage(),e=!0),e&&b.preventDefault()},!1),b.autoplay&&b.loopback||(Y=!1),a.renewPages=function(b){var c=[],d={},e=[],f=[],g=a.keys,h=a.pageIndex;if(b.forEach(function(a){var b=a[0],g=a[1];parseInt(b)+""!==b&&(d[b]=c.length),g.whenSlideLeave||f.push([b,g,c.length]),c.push(b),e.push(g)}),g.forEach(function(a){c.indexOf(a)<0&&delete R[a]}),f.length&&P>0){q.classList.add("no-trans"),setTimeout(function(){q.classList.remove("no-trans")},100),O=Math.floor(window.innerHeight/2);var i=O-L,j=K+K,k=L+L,m=[];f.forEach(function(b){var c=b[0],d=b[1],e=b[2],f=a.initPage(d,c,e,j,k,i);U.apply(m,f)}),m.forEach(function(a){l.addClass(a[0],a[1])})}var n,o=g[h],p="string"==typeof o;if(a.keys=c,a.namedPage=d,Q=e,p&&(n=c.indexOf(o))>=0)a.pageIndex=n;else{var r=0;if(p)for(var s=h-1;s>=0;s--){var t=g[s];if(t&&(n=c.indexOf(t))>=0){r=s;break}}c.length?setTimeout(function(){a.gotoPage(r)},300):a.pageIndex=0}},a.gotoPage_=function(b,d){var e=b[d],f=Q[d];return e&&f?(aa(a,d,c),c=!1,[e,f.widget]):["",null]},a.isFirstEnter=function(a){if(!a||!a.classList.contains("rewgt-scene"))return!1;var b=l.keyOfNode(a);return!!b&&(R[b]||0)<1},a.initPage=function(a,b,c,d,e,f){var g=[];a.whenSlideLeave||(a.whenSlideLeave=A);var h,i=a.getHtmlNode();if(i&&(h=a.widget)){for(var m,j=i.querySelectorAll("div.rewgt-center > [data-prepost]"),k=0;m=j[k];k++){var b=l.keyOfNode(m);if(b){var n=h[b];if(n=n&&n.component){var o=z(n);o&&(Y&&X.push(n),g.push([n,o]))}}}j=i.querySelectorAll(".rewgt-static > .build, .rewgt-center > .build");for(var m,k=0;m=j[k];k++){var b,p=m.parentNode.classList.contains("rewgt-static"),q=null;!p&&(b=l.keyOfNode(m))&&(q=b&&h[b]);for(var s,r=0;s=m.children[r];r++)if(p)s.classList.add("to-build");else if(q&&(b=l.keyOfNode(s))){var n=q[b];n=n&&n.component,n&&l.addClass(n,"to-build")}}}return a.duals.width=d,a.duals.height=e,a.duals.top=f,a.duals.borderWidth=[1,1,1,1],g},a.enterPage=function(a,b,c){if(!i.__design__){T&&(y(T,!0),T=null),S=null;var d;if(c&&(d=b.getHtmlNode())){for(var j,e=[],f=!1,g=d.querySelectorAll('div.rewgt-center > [class*="prebuild-"]'),h=0;j=g[h];h++){var k=j.getAttribute("data-prepost")||"",m=k.split("-");if(0==h&&parseInt(m[4])&&(f=!0),"18"===m[0]||"19"===m[0]||"18"===m[2]||"19"===m[2]){var n=l.keyOfNode(j);n&&e.push(n)}}var o;if(e.length&&(o=b.widget)&&setTimeout(function(){e.forEach(function(a){var b=o[a],c=b&&b.component;c&&"function"==typeof c.playOnEnter&&c.playOnEnter()&&"function"==typeof c.stepPlay&&c.stepPlay(0)})},300),f){var p=a.target;setTimeout(function(){_(p)},300)}}}};var w=b.page||0;"string"==typeof w&&(w=a.namedPage[w]||0),"number"!=typeof w&&(w=0),a.pageIndex=w,aa(a,w,c),b.autoplay&&("number"!=typeof b.autoplay?b.autoplay=0:setTimeout(x,1e3*b.autoplay))}}})}();